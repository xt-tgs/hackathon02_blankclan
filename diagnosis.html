<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MetaLeaf</title>
    <meta name="description" content="MetaLeafでつながる。エンジニア仲間、学習中の方など様々な方が参加しています。">
    <!-- フォント類 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=DotGothic16&family=Noto+Sans+JP:wght@100..900&display=swap"
        rel="stylesheet">
    <!-- リセットCSS -->
    <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
    <!-- メインCSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Slick CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css" />
    <!-- ファビコン -->
    <link rel="shortcut icon" href="img/favicon.ico">

</head>

<body>
    <header class="header_diago">
        <div class="bar_diago">
            <a href="/" class="logo-set_diago">
                <img src="img/logo01.png" alt="MetaLeafロゴ" class="logo-icon_diago" />
                <img src="img/text_MataLeaf.png" alt="MetaLeafテキストロゴ" class="logo-text_diago" />
            </a>
        </div>
    </header>

    <main>
        <section class="diagnosis">
            <h2>アバター診断</h2>
            <div id="card"></div>
            <div class="avatar-lower">
                <img src="img/firiend6.png" alt="アバター集合画像">
            </div>

            <!-- <div class="avatar-lower">
                <img class="pc" src="img/avatar/avatar0.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar1.png" alt="アバター画像">
                <img src="img/avatar/avatar2.png" alt="アバター画像">
                <img src="img/avatar/avatar3.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar4.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar5.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar6.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar7.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar8.png" alt="アバター画像">
                <img src="img/avatar/avatar9.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar10.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar11.png" alt="アバター画像">
                <img src="img/avatar/avatar12.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar13.png" alt="アバター画像">
                <img src="img/avatar/avatar14.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar15.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar16.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar17.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar18.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar19.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar20.png" alt="アバター画像">
                <img src="img/avatar/avatar21.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar22.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar23.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar24.png" alt="アバター画像">
                <img class="pc" src="img/avatar/avatar25.png" alt="アバター画像">
            </div> -->
        </section>
    </main>
    <footer class="footer">
        <a href="index.html#top-page" class="footer-logo">
            <img src="img/logo01.png" alt="MetaLeafロゴ" />
        </a>
        <nav class="footer-nav">
            <a href="index.html#question">MetaLeafについて</a>
            <a href="index.html#avatar">アバター</a>
            <a href="index.html#method">操作方法</a>
            <a href="index.html#floormap">フロアマップ</a>
        </nav>
        <hr class="footer-line" />
        <div class="footer-copy">&copy; MetaLeaf 2025</div>
    </footer>
    <script>
        const questions = [
            { id: 'Q1', text: '一番落ち着くのはどっち？', options: { A: '静かな場所で一人の時間を過ごす', B: '誰かと話したり、音がある環境で過ごす' } },
            { id: 'Q2A', text: '予定が空いたらどっちを選ぶ？', options: { A: '読書や映画でゆっくり過ごす', B: '散歩や自然を感じる場所に出かける' } },
            { id: 'Q2B', text: '活力を得るならどれ？', options: { A: '新しいイベントやスポットを探索する', B: 'カフェやバーで人とおしゃべり', C: '仲間や友人とアウトドアを楽しむ' } },
            { id: 'Q3', text: '物事の決め方はどっちが近い？', options: { A: '自分の直感で選ぶ', B: '情報を集めて比較してから選ぶ' } },
            { id: 'Q4', text: '困っている人がいたら？', options: { A: '話を聞いて共感して寄り添う', B: '解決策を論理的に考える' } }
        ];

        const followup = { id: 'Q5', text: '自分に近いのはどっち？', options: { A: '自分ルールや計画があるほうが落ち着く', B: 'その場の流れや直感で動くほうが楽' } };

        const needQ5 = new Set(['AAAA', 'AAAB', 'ABAA', 'AABB', 'BAAA', 'BAAB']);

        const results = {
            'AAAAA': { title: '静かな分析者', desc: '静けさがさらに己の深淵なる力を発揮するのである', img: '/img/avatar/avatar4.png' },
            'AAAAB': { title: 'AIチャットロボット', desc: '何でもウンウンって聞いてるわけじゃないの。しっかり聞いてるのよ', img: '/img/avatar/avatar22.png' },
            'AAABA': { title: '穏やかなリスナー', desc: '内向的に見えてもうちに秘める思いはアツいのよ', img: '/img/avatar/avatar6.png' },
            'AAABB': { title: '自由な旅人', desc: 'ふわふわしているように見えて意外と考えてるんだ', img: '/img/avatar/avatar18.png' },
            'ABAAA': { title: '最高のメンター', desc: '気がついたらいつも誰かの相談受けてるかも…', img: '/img/avatar/avatar11.png' },
            'ABAAB': { title: 'いい意味の八方美人', desc: 'エブリデイ、エブリタイム全集中！！', img: '/img/avatar/avatar5.png' },
            'AABBA': { title: 'ぐるぐるハリケーン', desc: 'soポジティブenergyでまわりを巻き込んでゆく', img: '/img/avatar/avatar2.png' },
            'AABBB': { title: '現代のゴッホ', desc: 'センスに溢れて、センスに溺れそう', img: '/img/avatar/avatar20.png' },
            'BAAAA': { title: '必須ムードメーカー', desc: '盛り上げ役として飲み会に１台いかが？', img: '/img/avatar/avatar21.png' },
            'BAAAB': { title: '癒しのメシア', desc: '周りを魅了しちゃうくらい愛くるしい', img: '/img/avatar/avatar24.png' },
            'BAABA': { title: 'The Sun', desc: 'その圧倒的な明るさが嫌いな人なんていない', img: '/img/avatar/avatar14.png' },
            'BAABB': { title: '天性のカリスマ', desc: '失敗を恐れていてはそこの未来はない', img: '/img/avatar/avatar12.png' },
            'ABAB': { title: 'ナチュラルヒーラー', desc: '気取らない自然体がいいハーモニーを奏でる', img: '/img/avatar/avatar1.png' },
            'ABBA': { title: '堅実な操縦士', desc: '確実にやる。ライバルは昨日の自分！', img: '/img/avatar/avatar15.png' },
            'ABBB': { title: '片付けマスター', desc: '整理整頓・論理思考の徹底派', img: '/img/avatar/avatar8.png' },
            'BABA': { title: '人気ファシリテーター', desc: '会議の進行役に打ってつけ！皆んなの意見引き出します', img: '/img/avatar/avatar3.png' },
            'BABB': { title: '七変化カメレオン', desc: '状況を瞬時に判断し空気を読んでカラーチェンジ♪', img: '/img/avatar/avatar19.png' },
            'BBAA': { title: 'タイプ：いるか', desc: '行動力の塊。君は第二のいるかです。', img: '/img/avatar/avatar7.png' },
            'BBAB': { title: '天才ピアニスト', desc: 'ベートーヴェンのように感受性が豊かで表現力も高いのです', img: '/img/avatar/avatar16.png' },
            'BBBA': { title: '仲介ハブ人間', desc: '調和を愛し、人と人を繋いでいきます', img: '/img/avatar/avatar13.png' },
            'BBBB': { title: 'エンタメプランナー', desc: '次からつぎへとアイデアが湧き出してきて止まらない', img: '/img/avatar/avatar9.png' },
            'BCAA': { title: '内なる妄想家', desc: '其の真価が発揮されるのはノイズキャンセルにつき', img: '/img/avatar/avatar10.png' },
            'BCAB': { title: '不屈の挑戦者', desc: '臆することなく常に刺激を求め前に進む', img: '/img/avatar/avatar23.png' },
            'BCBA': { title: '感情ジェットコースター', desc: 'その喜怒哀楽ですら全てが私の魅力の根源', img: '/img/avatar/avatar17.png' },
            'BCBB': { title: 'エモ殺し屋', desc: '感情に左右されず、理論的に物事を判断するタイプ', img: '/img/avatar/avatar25.png' },
            'AABA': { title: '要点コンシェルジュ', desc: '複雑な情報を整理し、わかりやすく伝えることが得意', img: '/img/avatar/avatar0.png' }
        };


        const card = document.getElementById('card');
        let answers = '';

        function renderQuestion(index) {
            card.innerHTML = '';
            let q;
            if (index === 0) {
                q = questions[0]; // Q1
            } else if (index === 1) {
                q = answers[0] === 'A' ? questions[1] : questions[2]; // Q2A or Q2B
            } else if (index === 2 || index === 3) {
                // Q3, Q4 は Q2AとQ2B のどちらでも共通で質問数2つ
                const offset = answers[0] === 'A' ? 2 : 3; // Q3/Q4の位置を補正
                q = questions[offset + (index - 2)];
            } else {
                return renderFinal(); // 質問が終わったら結果へ
            }

            const h = document.createElement('h3');
            h.textContent = q.text;
            card.appendChild(h);

            const div = document.createElement('div');
            div.className = 'choices';
            Object.entries(q.options).forEach(([key, label]) => {
                const btn = document.createElement('button');
                btn.className = 'btn';
                btn.textContent = label;
                btn.onclick = () => {
                    answers += key;
                    renderQuestion(index + 1);
                };
                div.appendChild(btn);
            });
            card.appendChild(div);
        }

        function renderFinal() {
            if (needQ5.has(answers)) {
                const q = followup;
                card.innerHTML = '';
                const h = document.createElement('h3');
                h.textContent = q.text;
                card.appendChild(h);

                const div = document.createElement('div');
                div.className = 'choices';
                Object.entries(q.options).forEach(([key, label]) => {
                    const btn = document.createElement('button');
                    btn.className = 'btn';
                    btn.textContent = label;
                    btn.onclick = () => {
                        answers += key;
                        renderResult();
                    };
                    div.appendChild(btn);
                });
                card.appendChild(div);
            } else {
                renderResult();
            }
        }

        function renderResult() {
            const result = results[answers];
            if (!result) {
                card.innerHTML = '<p>結果が見つかりませんでした。もう一度お試しください。</p>';
                return;
            }

            const img = document.createElement('img');
            img.src = result.img;
            img.alt = result.title;
            img.className = 'result-img';

            const h = document.createElement('h3');
            h.textContent = 'あなたにぴったりのアバターは…';

            const p = document.createElement('p');
            p.className = 'tagline';
            p.textContent = `【${result.title}】 – ${result.desc}`;

            const again = document.createElement('button');
            again.className = 'btn reset';
            again.textContent = 'もう一度診断する';
            again.onclick = () => { answers = ''; renderQuestion(0); };

            card.innerHTML = '';
            card.append(img, h, p, again);
        }

        renderQuestion(0);
    </script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script src="../js/jquery-main.js"></script>
</body>

</html>